
# Диаграмма последовательности: Формирование и просмотр отчета

```plantuml
@startuml
actor Руководитель
actor Исполнитель
participant "UI" as UI
participant "Система" as Система
participant "Модуль отчетности" as Отчетность
participant "Модуль заданий" as Задания
participant "База данных" as БД

== Формирование отчета ==

Руководитель -> UI: Нажимает "Сформировать отчет"
UI -> Руководитель: Показывает форму параметров
Руководитель -> UI: Вводит период, критерии, исполнителя
UI -> Система: Запрос на формирование отчета (с параметрами)
activate Система

Система -> Отчетность: Сформировать отчет(параметры)
activate Отчетность
Отчетность -> Задания: Получить задания по критериям
activate Задания
Задания -> БД: Запрос: задания[статус='Выполнено', критерии]
activate БД
БД --> Задания: Список выполненных заданий
deactivate БД
Задания --> Отчетность: Данные заданий
deactivate Задания

Отчетность -> Отчетность: Рассчитать статистику
Отчетность -> Отчетность: Создать объект "Отчет"
Отчетность -> БД: Сохранить объект "Отчет"
activate БД
БД --> Отчетность: ID сохраненного отчета
deactivate БД
Отчетность --> Система: Отчет сформирован
deactivate Отчетность

Система -> UI: Уведомление "Отчет готов"
UI -> Руководитель: Отображает уведомление
deactivate Система

== Просмотр отчета ==

Руководитель -> UI: Открывает "Отчеты"
UI -> Система: Запрос списка отчетов
activate Система
Система -> Отчетность: Получить список отчетов
activate Отчетность
Отчетность -> БД: Запрос метаданных отчетов
activate БД
БД --> Отчетность: Список (ID, название, дата)
deactivate БД
Отчетность --> Система: Список отчетов
deactivate Отчетность
Система --> UI: Передает список
UI -> Руководитель: Отображает список отчетов

Руководитель -> UI: Выбирает отчет из списка
UI -> Система: Запрос данных отчета (ID)
activate Система
Система -> Отчетность: Получить отчет по ID
activate Отчетность
Отчетность -> БД: Запрос полных данных отчета
activate БД
БД --> Отчетность: Данные отчета
deactivate БД
Отчетность --> Система: Данные отчета
deactivate Отчетность
Система --> UI: Передает данные отчета
UI -> Руководитель: Отображает детали отчета
deactivate Система

@enduml
```
